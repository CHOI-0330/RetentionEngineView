# RetentionEngineView AI開発ガイド

## 1. プロジェクト概要

**RetentionEngineView**は、学生の学習効率と定着率（リテンション）を向上させるために設計されたAI搭載の教育プラットフォームです。このシステムは「学生」と「メンター」という2つの主要な役割に応じた専用のインターフェースを備えています。中心的なコンセプトは**「メンター・イン・ザ・ループ（Mentor-in-the-Loop）」**システムであり、学生はAIチューターと対話し、人間のメンターがその対話をレビューしてフィードバックを提供し、AIの知識ベースを継続的に改善します。

## 2. 主要なビジネスロジック

このアプリケーションは、相互に関連する3つのフィードバックループに基づいて動作します。

### a. 学生-AI学習ループ（基本学習）
- **主体**: 学生
- **プロセス**:
    1. 学生が`StudentChatScreen`を通じてAIチューターに質問します。
    2. AIがリアルタイムで回答し、基本的な学習体験を提供します。
    3. すべての会話は`StudentChatHistoryScreen`に記録され、学生は後で復習することができます。

### b. メンター-AI品質管理ループ（フィードバックと添削）
- **主体**: メンター
- **プロセス**:
    1. システムが特定のAIとの会話を「レビュー必要」として自動的に分類します。
    2. メンターは`MentorDashboard`でレビューが必要な会話のリストを確認します。
    3. `MentorChatReviewScreen`を使用して、該当する会話の内容を検討します。
    4. メンターはAIの回答を直接**添削**し、なぜそのように修正したかについての**コメント**を追加できます。
    5. このフィードバックは、学生のチャット画面にある`MentorFeedbackPreview`コンポーネントを通じて表示され、学生はより質の高い情報に基づいて二次学習を行うことができます。

### c. 知識ベース強化ループ（システムの成長）
- **主体**: メンター
- **プロセス**:
    1. メンターの添削内容は、一回限りのフィードバックに留まらず、永続的な知識資産へと転換されます。
    2. メンターは`KnowledgeCorrectionScreen`で、添削した内容を「科目」「難易度」「タグ」などのメタデータと共に、洗練された知識ドキュメントとして作成します。
    3. 「公開」されたドキュメントは、中央の知識ベースである`KnowledgeSummaryScreen`に蓄積されます。
    4. この検証済みの知識ベースは、将来的にAIモデルのファインチューニングや、類似の質問に対するAIの回答精度を向上させるために使用されます。これにより、システム全体が時間と共により賢くなっていきます。

## 3. 主要コンポーネントの機能

### 最上位インターフェース
- **`App.tsx`**: アプリのエントリーポイント。`UserRoleSelector`を介して役割を選択させ、`StudentInterface`または`MentorInterface`をレンダリングします。
- **`StudentInterface.tsx`**: 学生体験のためのメインコンテナ。学生用のサイドバー、レイアウト、現在アクティブなビューを管理します。
- **`MentorInterface.tsx`**: メンター体験のためのメインコンテナ。メンター用のサイドバー、レイアウト、画面遷移を管理します。

### 主要機能画面
- **`StudentChatScreen.tsx`**: 学生がAIと対話するためのメインチャット画面です。
- **`StudentChatHistoryScreen.tsx`**: 学生が自身の過去の会話履歴を閲覧する画面です。
- **`StudentFeedbackScreen.tsx`**: 学生がメンターから受け取ったすべての添削フィードバックをリスト形式で確認するための専用ページです。
- **`MentorDashboard.tsx`**: メンターのランディングページ。レビューが必要な学生や会話のリストを表示します。
- **`MentorChatReviewScreen.tsx`**: メンターが特定の学生とAIのチャットを詳細にレビューし、添削やコメントを作成する画面です。
- **`KnowledgeCorrectionScreen.tsx`**: メンターがAIの回答を永続的な知識ベースの記事として編集・発行する画面です。
- **`KnowledgeSummaryScreen.tsx`**: メンターが蓄積されたすべての知識ベース記事を検索・閲覧するライブラリです。

### 共通・UIコンポーネント
- **`AppSidebar.tsx`**: 役割（`student`/`mentor`）に応じて異なるメニュー項目を表示するメインサイドバーナビゲーションです。
- **`MentorFeedbackPreview.tsx`**: 学生のチャットログ内でメンターからの添削があることを示し、クリックすると詳細内容をダイアログで表示するコンポーネントです。
- **`UserRoleSelector.tsx`**: ユーザーが「学生」または「メンター」の役割を選択する初期画面です。
- **`src/components/ui/`**: shadcn/uiベースの再利用可能なUIコンポーネント（Button, Card, Dialogなど）が格納されているディレクトリです。

## 4. 開発環境の実行

- 以下のコマンドを使用して開発サーバーを起動します。
  ```bash
  npm run dev
  ```
